# Bertrand
### 純粋関数型・論理型プログラミング言語

# イントロダクション

BertrandはHaskellライクな純粋関数型言語をベースに，論理型言語として直感的なインターフェースを提供します．

Haskellに代表される関数型言語は，シンプルなコアと強力な型システムにより高い表現力を有しています．
Bertrandはシンプルなラムダ計算をベースとしつつ，パターンマッチを改良し より宣言的なプログラミングを可能にします．
また，型システムを推論機構として内包しており，高階型や型クラスのみならず依存型や型レベルプログラミングを柔軟に扱えます．これは静的型付けと動的型付けの垣根を越えるものです．
Bertrandは遅延評価ですが，上記の特徴から評価順は保証されず処理系に依存します．

# チュートリアル

## 対話環境

    <expr>   -- expr を全て評価して表示
    <expr> ? -- exprの真偽値を表示
    <stmt>.  -- stmt（宣言または制約）が真である

    :<command> -- コマンド :?でヘルプ

## 四則演算

基本的な整数演算は組み込まれています．

    > 1 + 2
    3
    > 4 * 3
    12

## 関数

関数を定義することができます．

    > fib 0 = 1.
    > fib 1 = 1.
    > fib x = fib (x - 1) + fib (x - 2)

    > fib 5
    8

複数のパターンにマッチするとき，最も具体的な定義が選ばれます．

## リスト

リストは最も一般的なデータ型の一つですが，正体はただの再帰的なコンストラクタです．
各種関数が標準ライブラリに定義されています．

    > [1,2,3]
    (: 1) ((: 2) ((: 3) []))
    > map (2 *) [1,2,3]
    (: 2) ((: 4) ((: 6) []))
    > foldr (+) 0 [1,2,3,4,5]
    15

## 定数とデータ型

4文字以上の識別子は定数となり，束縛されていない場合ユニークな値を持ちます．
関数適用するとデータコンストラクタとなります．

    > nothing
    nothing
    > just 2
    just 2

## 変数と制約

英小文字3文字以下またはvar宣言された識別子は変数となります．
Bertrandの変数は決まった値ではなく制約を持つもので，論理型言語としてのインターフェースになります．

    > var true false.
    > true. true.
    > false. ~ false.

式を宣言すると，その式が真であるという意味になります．
(~ 式) という宣言は，その式が偽であるという意味です.

変数 . 式 という宣言は，変数がその式を真にするという制約を持つことを表します．
上の例では，`true`は真であるという制約，`false`は偽であるという制約を持ちます．

    > x . x > 0.

これは，`x`は`0`以上の数であるという制約を持つ宣言になります．

## 真偽値

定数や式についても真偽を宣言することができます．

基本的な論理演算は標準で定義されています．

式に?をつけると，真偽値（true, false, undefinedのいずれか）を表示します．

    > A.
    > A?
    true

    > ~ B.
    > B?
    false

    > A => C.
    > C?
    true

    > D?
    undefined

    > A and B ?
    false

    > A or B ?
    true


## パターンマッチ

パターンマッチを使えるのは，関数・case式とマッチ演算子です．

パターンマッチのルールは以下の通りです：

- ワイルドカードは全てにマッチする
- 定数は同じ定数にマッチする
- 変数は自身が持つ全ての制約を満たす式にマッチする

    > abs (x ! x. x >= 0) = x.
    > abs (x ! x. x < 0)  = (-x).
    > abs 2
    2
    > abs (-3)
    3

上の例は整数の絶対値を求める関数です．変数が持つ制約にマッチした方の値をとります．

## 型（集合）

型システムは推論機構を用いて，集合として定義される．高階型，型クラスやサブタイピング，依存型に相当する柔軟な型を用いることができる．

※未完成

    > n :: Nat.   -- 型（集合）
    > Monoid Nat. -- 型クラス
    > Nat := Real -- 部分集合
    > prod :: Matrix n m -> Matrix m l -> Matrix n l  -- 依存型
